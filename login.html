<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login System â€¢ Auth</title>
  <meta name="description" content="Real login system with local storage data verification" />
  <style>
    :root{
      --bg: #071022;
      --card: rgba(255,255,255,0.06);
      --glass-border: rgba(255,255,255,0.06);
      --accent: #0ea5e9;
      --muted: rgba(255,255,255,0.75);
      --error: #fb7185;
      --success: #34d399;
    }

  
    @media (prefers-color-scheme: light){
      :root{ --bg: #f7fbff; --card: rgba(255,255,255,0.7); --muted: #0f172a; --glass-border: rgba(0,0,0,0.06) }
      body { color: #0f172a; }
    }

    *{ box-sizing: border-box; font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; }
    html,body{ height:100%; margin:0; background:var(--bg); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    #bgCanvas{ position:fixed; inset:0; width:100%; height:100%; z-index:-1; display:block; }

  
    .wrap{ min-height:100dvh; display:flex; align-items:center; justify-content:center; padding:28px; }
    .card{ width:min(680px, 96%); border-radius:20px; padding:20px; background:var(--card); border:1px solid var(--glass-border); box-shadow:0 12px 40px rgba(2,6,23,0.6); backdrop-filter: blur(10px) saturate(120%); transition:transform .28s ease, box-shadow .28s ease; }
    .card:focus-within{ transform:translateY(-4px); box-shadow:0 20px 60px rgba(2,6,23,0.7); }

  
    .brand{ display:flex; gap:12px; align-items:center; margin-bottom:10px; }
    .logo{ width:44px; height:44px; border-radius:10px; background: linear-gradient(135deg, #0ea5e9, #8b5cf6); }

  
    h1{ margin:0; font-size:1.15rem; }
    .muted{ color:var(--muted); opacity:.9; font-size:.92rem; margin:0; }

  
    .tabs{ display:inline-flex; gap:6px; background:transparent; padding:6px; margin:12px 0 8px; }
    .tab{ padding:8px 14px; border-radius:999px; background:transparent; border:none; color:var(--muted); cursor:pointer; font-weight:600; transition:all .18s ease; outline:none; }
    .tab.active{ background:linear-gradient(90deg,var(--accent),#60a5fa); color:white; box-shadow: 0 6px 20px rgba(14,165,233,0.14); }
    .tab:focus-visible{ box-shadow:0 0 0 4px rgba(14,165,233,0.12); }

  
    .panels{ margin-top:6px; }
    .panel{ display:none; opacity:0; transform:translateY(8px); transition: all .28s cubic-bezier(.2,.9,.3,1); max-width:520px; margin-inline:auto; }
    .panel.active{ display:block; opacity:1; transform:none; pointer-events:auto; }
    .panel.center{ text-align:center; }

  
    .field{ margin:10px 0; display:flex; flex-direction:column; gap:6px; }
    .label-text{ font-weight:600; font-size:.92rem; color:var(--muted); }
    input[type="text"], input[type="email"], input[type="password"]{
      padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); background: rgba(255,255,255,0.03); color:inherit; outline:none; transition: box-shadow .12s ease, border-color .12s ease;
    }
    @media (prefers-color-scheme: light){
      input{ background: #fff; color: #0f172a; border:1px solid rgba(2,6,23,0.06) }
    }
    input:focus{ box-shadow:0 8px 30px rgba(14,165,233,0.07); border-color:var(--accent); }

    .pw-wrap{ position:relative; display:flex; align-items:center; }
    .pw-wrap .toggle{ position:absolute; right:8px; top:50%; transform:translateY(-50%); background:transparent; border:none; padding:6px 8px; cursor:pointer; font-weight:600; color:var(--muted); }
    .pw-wrap .toggle:focus{ outline:3px solid rgba(14,165,233,0.12); border-radius:8px; }

  
    .row{ display:flex; gap:12px; align-items:center; }
    .row.between{ justify-content:space-between; }

  
    .checkbox{ display:flex; align-items:center; gap:8px; cursor:pointer; }
    .checkbox input[type="checkbox"]{ width:16px; height:16px; }

  
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 14px; border-radius:12px; border:none; cursor:pointer; font-weight:700; transition: transform .12s ease, opacity .12s ease; }
    .btn:active{ transform:translateY(1px); }
    .btn[disabled]{ opacity:.6; cursor:not-allowed; transform:none; }
    .btn.primary{ width:100%; background:linear-gradient(90deg,var(--accent),#60a5fa); color:white; box-shadow:0 10px 30px rgba(14,165,233,0.12); }
    .btn.social{ width:100%; background: rgba(255,255,255,0.92); color:#111; border:1px solid rgba(2,6,23,0.06); }
    .divider{ text-align:center; margin:12px 0; color:var(--muted); font-size:.9rem; }

  
    .link, .link-inline{ background:none; border:none; color:var(--accent); cursor:pointer; padding:0; font:inherit; text-decoration:underline; font-weight:600; }
    .link:focus-visible, .link-inline:focus-visible{ outline:3px solid rgba(14,165,233,0.12); border-radius:6px; }

  
    .error{ color:var(--error); font-size:.875rem; min-height:1.1rem; }
    .success{ color:var(--success); font-size:2rem; margin-bottom:10px; }
    .center{ text-align:center; }

  
    .hint{ font-size:.85rem; color:var(--muted); margin-bottom:16px; display:flex; align-items:center; gap:6px; }

  
    .card-footer{ margin-top:14px; text-align:center; font-size:.85rem; color:var(--muted); }

  
    #toasts{ position:fixed; top:18px; right:18px; display:flex; flex-direction:column; gap:10px; z-index:40; }
    .toast{ padding:10px 14px; border-radius:10px; color:white; box-shadow:0 8px 30px rgba(2,6,23,.4); min-width:180px; display:flex; justify-content:space-between; gap:10px; align-items:center; }
    .toast.success{ background: linear-gradient(90deg,#16a34a,#34d399); }
    .toast.error{ background: linear-gradient(90deg,#ef4444,#fb7185); }
    .tclose{ background:none; border:none; color:white; cursor:pointer; padding:0; font-size:.9rem; }

  
    @media (max-width:520px){
      .card{ padding:16px; border-radius:14px; }
      .tabs{ gap:4px; }
    }
  </style>
</head>
<body>

  <main class="wrap" id="app" aria-live="polite">
    <section class="card glass" role="region" aria-labelledby="auth-heading">
      <div class="brand">
        <img src="logo.svg">
        <div>
          <h1 id="auth-heading"></h1>
          <p class="muted">Please Login</p>
        </div>
      </div>

    
      <div class="tabs" role="tablist" aria-label="Authentication tabs">
        <button id="tab-login" role="tab" aria-selected="true" class="tab active">Login</button>
        <button id="tab-signup" role="tab" aria-selected="false" class="tab">Sign Up</button>
        <button id="tab-forgot" role="tab" aria-selected="false" class="tab">Forgot</button>
      </div>

    
      <div class="panels">
      
        <form id="panel-login" class="panel active" role="tabpanel" aria-labelledby="tab-login" autocomplete="on" novalidate>
          <div class="hint"><span aria-hidden>ðŸ”’</span> Login with your stored credentials</div>

          <label class="field">
            <span class="label-text">Email</span>
            <input id="login-email" name="email" type="email" inputmode="email" autocomplete="email" required aria-describedby="login-email-err" />
            <small id="login-email-err" class="error" aria-live="polite"></small>
          </label>

          <label class="field">
            <span class="label-text">Password</span>
            <div class="pw-wrap">
              <input id="login-pass" name="password" type="password" autocomplete="current-password" required aria-describedby="login-pass-err" />
              <button type="button" class="toggle" aria-label="Toggle password visibility" data-target="login-pass">Show</button>
            </div>
            <small id="login-pass-err" class="error" aria-live="polite"></small>
          </label>

          <div class="row between">
            <label class="checkbox"><input id="login-remember" name="remember" type="checkbox" /> <span>Remember me</span></label>
            <button type="button" class="link" data-switch="forgot" aria-controls="panel-forgot">Forgot password?</button>
          </div>

          <button id="login-submit" class="btn primary" type="submit" aria-live="polite">Sign in</button>

          <div class="divider">or</div>

          <button id="google-login" class="btn social" type="button" aria-label="Continue with Google">Continue with Google</button>

          <p class="muted center">No account? <button type="button" class="link" data-switch="signup">Create one</button></p>
        </form>

      
        <form id="panel-signup" class="panel" role="tabpanel" aria-labelledby="tab-signup" autocomplete="on" novalidate>
          <div class="hint"><span aria-hidden>ðŸ”’</span> Data stored in your browser's local storage</div>

          <label class="field">
            <span class="label-text">Full name</span>
            <input id="signup-name" name="name" type="text" autocomplete="name" required aria-describedby="signup-name-err" />
            <small id="signup-name-err" class="error" aria-live="polite"></small>
          </label>

          <label class="field">
            <span class="label-text">Email</span>
            <input id="signup-email" name="email" type="email" autocomplete="email" required aria-describedby="signup-email-err" />
            <small id="signup-email-err" class="error" aria-live="polite"></small>
          </label>

          <label class="field">
            <span class="label-text">Password</span>
            <div class="pw-wrap">
              <input id="signup-pass" name="password" type="password" autocomplete="new-password" required aria-describedby="signup-pass-err" />
              <button type="button" class="toggle" aria-label="Toggle password visibility" data-target="signup-pass">Show</button>
            </div>
            <small id="signup-pass-err" class="error" aria-live="polite"></small>
          </label>

          <label class="field">
            <span class="label-text">Confirm password</span>
            <div class="pw-wrap">
              <input id="signup-confirm" name="confirm" type="password" autocomplete="new-password" required aria-describedby="signup-confirm-err" />
              <button type="button" class="toggle" aria-label="Toggle password visibility" data-target="signup-confirm">Show</button>
            </div>
            <small id="signup-confirm-err" class="error" aria-live="polite"></small>
          </label>

          <label class="checkbox">
            <input id="signup-terms" name="terms" type="checkbox" required aria-describedby="signup-terms-err" />
            <span>I agree to <button type="button" class="link-inline" onclick="alert('Terms of Service')">Terms</button> & <button type="button" class="link-inline" onclick="alert('Privacy Policy')">Privacy</button></span>
          </label>
          <small id="signup-terms-err" class="error" aria-live="polite"></small>

          <button id="signup-submit" class="btn primary" type="submit">Create account</button>
          <p class="muted center">Already a member? <button type="button" class="link" data-switch="login">Sign in</button></p>
        </form>

      
        <form id="panel-forgot" class="panel" role="tabpanel" aria-labelledby="tab-forgot" novalidate>
          <div class="hint"><span aria-hidden>ðŸ”’</span> We'll help you reset your password</div>

          <label class="field">
            <span class="label-text">Email</span>
            <input id="forgot-email" name="email" type="email" autocomplete="email" required aria-describedby="forgot-email-err" />
            <small id="forgot-email-err" class="error" aria-live="polite"></small>
          </label>

          <button id="forgot-submit" class="btn primary" type="submit">Send reset link</button>
          <p class="muted center">Remembered it? <button type="button" class="link" data-switch="login">Back to login</button></p>
        </form>

      
        <div id="panel-forgot-success" class="panel center" role="tabpanel" hidden>
          <div class="success">âœ…</div>
          <h3>Check your inbox</h3>
          <p class="muted">We've sent a password reset link.</p>
          <button class="btn" data-switch="login">Return to Login</button>
        </div>
      </div>
    </section>
  </main>


  <div id="toasts" aria-live="polite" aria-atomic="true"></div>

  <script>
document.addEventListener('DOMContentLoaded', () => {

  function initializeUsers() {
    if (!localStorage.getItem('users')) {
    
      const demoUsers = [
        {
          id: '1',
          name: 'Demo User',
          email: 'demo@example.com',
        
          password: btoa('Demo@123'),
          createdAt: new Date().toISOString()
        },
        {
          id: '2',
          name: 'Test User',
          email: 'test@example.com',
        
          password: btoa('Test@123'),
          createdAt: new Date().toISOString()
        }
      ];
      localStorage.setItem('users', JSON.stringify(demoUsers));
      console.log('Demo users initialized in local storage');
    }
  }


  function getUsers() {
    const users = localStorage.getItem('users');
    return users ? JSON.parse(users) : [];
  }


  function saveUsers(users) {
    localStorage.setItem('users', JSON.stringify(users));
  }


  function findUserByEmail(email) {
    const users = getUsers();
    return users.find(user => user.email.toLowerCase() === email.toLowerCase());
  }


  function generateId() {
    return Date.now().toString(36) + Math.random().toString(36).substr(2);
  }


  function registerUser(name, email, password) {
    const users = getUsers();
    
  
    if (findUserByEmail(email)) {
      throw new Error('User with this email already exists');
    }
    
  
    const newUser = {
      id: generateId(),
      name: name.trim(),
      email: email.toLowerCase().trim(),
      password: btoa(password),
      createdAt: new Date().toISOString()
    };
    
  
    users.push(newUser);
    saveUsers(users);
    
    return newUser;
  }


  function loginUser(email, password) {
    const user = findUserByEmail(email);
    
    if (!user) {
      throw new Error('User not found. Please sign up first.');
    }
    
  
    const decodedPassword = atob(user.password);
    if (decodedPassword !== password) {
      throw new Error('Incorrect password. Please try again.');
    }
    
  
    sessionStorage.setItem('currentUser', JSON.stringify({
      id: user.id,
      name: user.name,
      email: user.email
    }));
    
    return user;
  }


  function isLoggedIn() {
    return sessionStorage.getItem('currentUser') !== null;
  }


  function getCurrentUser() {
    const user = sessionStorage.getItem('currentUser');
    return user ? JSON.parse(user) : null;
  }


  function logoutUser() {
    sessionStorage.removeItem('currentUser');
  }


  function resetPassword(email, newPassword) {
    const users = getUsers();
    const userIndex = users.findIndex(u => u.email.toLowerCase() === email.toLowerCase());
    
    if (userIndex === -1) {
      throw new Error('User not found');
    }
    
  
    users[userIndex].password = btoa(newPassword);
    saveUsers(users);
    
    return true;
  }


  const tabs = { 
    login: document.getElementById('tab-login'), 
    signup: document.getElementById('tab-signup'), 
    forgot: document.getElementById('tab-forgot') 
  };
  
  const panels = { 
    login: document.getElementById('panel-login'), 
    signup: document.getElementById('panel-signup'), 
    forgot: document.getElementById('panel-forgot'), 
    'forgot-success': document.getElementById('panel-forgot-success') 
  };
  
  const switches = document.querySelectorAll('[data-switch]');
  const toastsWrap = document.getElementById('toasts');


  function toast(msg, type = 'success') {
    const el = document.createElement('div');
    el.className = `toast ${type}`;
    el.innerHTML = `<span>${msg}</span><button class="tclose" aria-label="Close">âœ–</button>`;
    toastsWrap.appendChild(el);
    el.querySelector('.tclose').addEventListener('click', () => el.remove());
    setTimeout(() => el.remove(), 3800);
  }


  function switchTo(name) {
    Object.keys(tabs).forEach(k => {
      const t = tabs[k];
      if(!t) return;
      const active = k === name;
      t.classList.toggle('active', active);
      t.setAttribute('aria-selected', String(active));
      t.tabIndex = active ? 0 : -1;
    });
    
    Object.values(panels).forEach(p => { 
      if(p){ 
        p.classList.remove('active'); 
        p.hidden = true; 
      }
    });
    
    const panel = panels[name] || panels['forgot-success'];
    if(panel){
      panel.hidden = false;
      requestAnimationFrame(()=> panel.classList.add('active'));
    }
    
  
    const heading = document.getElementById('auth-heading');
    const titleMap = { 
      login: 'Login to Your Account', 
      signup: 'Create New Account', 
      forgot: 'Reset Your Password' 
    };
    if(heading && titleMap[name]) {
      heading.textContent = titleMap[name];
    }
  }


  Object.entries(tabs).forEach(([name, btn]) => {
    if(!btn) return;
    btn.addEventListener('click', () => switchTo(name));
    btn.addEventListener('keydown', (e) => {
      const order = ['login','signup','forgot'];
      const idx = order.indexOf(name);
      if(e.key === 'ArrowRight') { 
        e.preventDefault(); 
        switchTo(order[(idx+1)%order.length]); 
        tabs[order[(idx+1)%order.length]].focus(); 
      }
      if(e.key === 'ArrowLeft') { 
        e.preventDefault(); 
        switchTo(order[(idx-1+order.length)%order.length]); 
        tabs[order[(idx-1+order.length)%order.length]].focus(); 
      }
    });
  });


  switches.forEach(s => s.addEventListener('click', () => {
    const target = s.getAttribute('data-switch');
    if(target) switchTo(target);
  }));


  document.querySelectorAll('.toggle').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-target');
      const input = document.getElementById(id);
      if(!input) return;
      if(input.type === 'password') { 
        input.type = 'text'; 
        btn.textContent = 'Hide'; 
      } else { 
        input.type = 'password'; 
        btn.textContent = 'Show'; 
      }
      input.focus({ preventScroll: true });
    });
  });


  const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  
  function setError(id, msg) { 
    const el = document.getElementById(id); 
    if(el) { 
      el.textContent = msg || ''; 
    } 
  }
  
  function clearErrors(prefix){ 
    ['email','pass','name','confirm','terms'].forEach(k => 
      setError(`${prefix}-${k}-err`, '')
    ); 
  }


  initializeUsers();


  if (isLoggedIn()) {
    const user = getCurrentUser();
    toast(`Welcome back, ${user.name}!`, 'success');
  }


  const loginForm = document.getElementById('panel-login');
  if(loginForm) loginForm.addEventListener('submit', async (ev) => {
    ev.preventDefault();
    clearErrors('login');
    
    const email = (document.getElementById('login-email').value || '').trim();
    const pass = (document.getElementById('login-pass').value || '').trim();
    const remember = document.getElementById('login-remember').checked;
    
  
    let isValid = true;
    
    if(!emailRe.test(email)){
      setError('login-email-err','Enter a valid email address');
      isValid = false;
    }
    
    if(pass.length < 6){
      setError('login-pass-err','Password must be at least 6 characters');
      isValid = false;
    }
    
    if(!isValid) return;
    
    const submitBtn = document.getElementById('login-submit');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Signing inâ€¦';
    
    try {
  
      const user = loginUser(email, pass);
      
      toast(`Welcome back, ${user.name}! Login successful.`, 'success');
      
  
      if (remember) {
        localStorage.setItem('rememberedEmail', email);
      } else {
        localStorage.removeItem('rememberedEmail');
      }
      
    
      setTimeout(() => {
        const userInfo = getCurrentUser();
        alert(`Login Successful!\n\nWelcome ${userInfo.name}\nEmail: ${userInfo.email}\n\nThis is a demo. In a real app, you would be redirected to dashboard.`);
      }, 1000);
      
    } catch(err) {
      toast(err.message || 'Login failed. Please try again.', 'error');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Sign in';
    }
  });


  const signupForm = document.getElementById('panel-signup');
  if(signupForm) signupForm.addEventListener('submit', async (ev) => {
    ev.preventDefault();
    clearErrors('signup');
    
    const name = (document.getElementById('signup-name').value || '').trim();
    const email = (document.getElementById('signup-email').value || '').trim();
    const pass = (document.getElementById('signup-pass').value || '');
    const confirm = (document.getElementById('signup-confirm').value || '');
    const terms = document.getElementById('signup-terms').checked;
    
  
    let isValid = true;
    
    if(name.length < 2){
      setError('signup-name-err','Enter your full name (min 2 characters)');
      isValid = false;
    }
    
    if(!emailRe.test(email)){
      setError('signup-email-err','Enter a valid email address');
      isValid = false;
    }
    
  
    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
    if(!passwordRegex.test(pass)){
      setError('signup-pass-err','Password must be 8+ chars with uppercase, lowercase, number & special char');
      isValid = false;
    }
    
    if(confirm !== pass){
      setError('signup-confirm-err','Passwords do not match');
      isValid = false;
    }
    
    if(!terms){
      setError('signup-terms-err','You must accept terms and conditions');
      isValid = false;
    }
    
    if(!isValid) return;
    
    const submitBtn = document.getElementById('signup-submit');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Creating Accountâ€¦';
    
    try {
    
      const newUser = registerUser(name, email, pass);
      
      toast(`Account created successfully! Welcome ${newUser.name}`, 'success');
      
    
      loginUser(email, pass);
      
    
      setTimeout(() => {
        switchTo('login');
        document.getElementById('login-email').value = email;
        toast('Auto-filled your email. You can now login.', 'success');
      }, 1500);
      
    } catch(err) {
      toast(err.message || 'Signup failed. Please try again.', 'error');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Create account';
    }
  });


  const forgotForm = document.getElementById('panel-forgot');
  if(forgotForm) forgotForm.addEventListener('submit', async (ev) => {
    ev.preventDefault();
    clearErrors('forgot');
    
    const email = (document.getElementById('forgot-email').value || '').trim();
    
    if(!emailRe.test(email)){
      setError('forgot-email-err','Enter a valid email address');
      return;
    }
    
    const submitBtn = document.getElementById('forgot-submit');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Processingâ€¦';
    
    try {
    
      const user = findUserByEmail(email);
      
      if (!user) {
        throw new Error('No account found with this email');
      }
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      toast(`Reset instructions sent to ${email}`, 'success');
      switchTo('forgot-success');
      
    } catch(err) {
      toast(err.message || 'Failed to process request', 'error');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send reset link';
    }
  });
  const gbtn = document.getElementById('google-login');
  if(gbtn) gbtn.addEventListener('click', () => {
    toast('Google OAuth would be integrated here in a real application', 'success');
  });
  const rememberedEmail = localStorage.getItem('rememberedEmail');
  if (rememberedEmail) {
    document.getElementById('login-email').value = rememberedEmail;
    document.getElementById('login-remember').checked = true;
  }
  document.querySelectorAll('.link, .link-inline').forEach(el => {
    el.addEventListener('keydown', (e) => { 
      if(e.key === 'Enter'){ 
        e.preventDefault(); 
        el.click(); 
      }
    });
  });
  console.log('Total users in local storage:', getUsers().length);
  console.log('Demo login: demo@example.com / Demo@123');
  console.log('Demo login: test@example.com / Test@123');
});
  </script>
</body>
</html>
